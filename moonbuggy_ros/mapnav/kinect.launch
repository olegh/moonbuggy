<launch>
    <include file="$(find freenect_launch)/launch/freenect.launch">
        <arg name="depth_registration" value="True"/>
    </include>

    <!-- Kinect cloud to laser scan -->
    <node pkg="depthimage_to_laserscan" type="depthimage_to_laserscan" name="depthimage_to_laserscan">
        <remap from="image" to="/camera/depth_registered/image_raw"/>
        <remap from="camera_info" to="/camera/depth_registered/camera_info"/>
        <!--<remap from="scan" to="/kinect_scan"/>-->
        <param name="range_max" type="double" value="4"/>
    </node>

    <!-- Odometry -->
    <node pkg="rtabmap_ros" type="rgbd_odometry" name="rgbd_odometry" output="screen">
        <remap from="rgb/image"       to="/camera/rgb/image_rect_color"/>
        <remap from="depth/image"     to="/camera/depth_registered/image_raw"/>
        <remap from="rgb/camera_info" to="/camera/depth_registered/camera_info"/>

        <param name="frame_id" type="string" value="base_link"/>
    </node>

    <!--<arg name="rate"  default="5"/>-->
    <!--<arg name="decimation"  default="1"/>-->

    <!--&lt;!&ndash; Use same nodelet used by Freenect/OpenNI &ndash;&gt;-->
    <!--<group ns="camera">-->
    <!--<node pkg="nodelet" type="nodelet" name="data_throttle" args="load rtabmap_ros/data_throttle camera_nodelet_manager" output="screen">-->
    <!--<param name="rate" type="double" value="$(arg rate)"/>-->
    <!--<param name="decimation" type="int" value="$(arg decimation)"/>-->

    <!--<remap from="rgb/image_in"       to="rgb/image_rect_color"/>-->
    <!--<remap from="depth/image_in"     to="depth_registered/image_raw"/>-->
    <!--<remap from="rgb/camera_info_in" to="rgb/camera_info"/>-->

    <!--<remap from="rgb/image_out"       to="data_throttled_image"/>-->
    <!--<remap from="depth/image_out"     to="data_throttled_image_depth"/>-->
    <!--<remap from="rgb/camera_info_out" to="data_throttled_camera_info"/>-->
    <!--</node>-->
    <!--</group>-->
</launch>
